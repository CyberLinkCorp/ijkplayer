diff --git a/libavformat/hls.c b/libavformat/hls.c
index 05ec0ba842..49f365f356 100644
--- a/libavformat/hls.c
+++ b/libavformat/hls.c
@@ -1445,6 +1445,16 @@ static int find_timestamp_in_playlist(HLSContext *c, struct playlist *pls,
     return 0;
 }
 
+static int find_timestamp_in_seq_no( struct playlist *pls,int64_t *timestamp, int seq_no)
+{
+    int i;
+    *timestamp=0;
+    for (i = 0; i < seq_no; i++) {
+        *timestamp += pls->segments[i]->duration ;
+    }
+    return 0;
+}
+
 static int select_cur_seq_no(HLSContext *c, struct playlist *pls)
 {
     int seq_no;
@@ -1884,12 +1894,14 @@ static int hls_read_packet(AVFormatContext *s, AVPacket *pkt)
 {
     HLSContext *c = s->priv_data;
     int ret, i, minplaylist = -1;
+    int64_t timestamp = AV_NOPTS_VALUE;
 
     recheck_discard_flags(s, c->first_packet);
     c->first_packet = 0;
 
     for (i = 0; i < c->n_playlists; i++) {
         struct playlist *pls = c->playlists[i];
+        find_timestamp_in_seq_no(pls, &timestamp, pls->cur_seq_no);
         /* Make sure we've got one buffered packet from each open playlist
          * stream */
         if (pls->needed && !pls->pkt.data) {
@@ -1927,7 +1939,7 @@ static int hls_read_packet(AVFormatContext *s, AVPacket *pkt)
                     }
 
                     tb = get_timebase(pls);
-                    ts_diff = av_rescale_rnd(pls->pkt.dts, AV_TIME_BASE,
+                    ts_diff = timestamp + av_rescale_rnd(pls->pkt.dts, AV_TIME_BASE,
                                             tb.den, AV_ROUND_DOWN) -
                             pls->seek_timestamp;
                     if (ts_diff >= 0 && (pls->seek_flags  & AVSEEK_FLAG_ANY ||
